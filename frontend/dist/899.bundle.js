"use strict";(self.webpackChunkmasih_revisi=self.webpackChunkmasih_revisi||[]).push([[899],{899:(a,t,n)=>{n.r(t),n.d(t,{renderDetailObatView:()=>o,renderObatView:()=>i,renderTambahObatView:()=>s});var e=n(879);async function i(){const a=localStorage.getItem("token");let t=[];try{const n=await fetch("https://apidiaw-production.up.railway.app/obat",{headers:a?{Authorization:`Bearer ${a}`}:{}});if(!n.ok)throw new Error("Gagal mengambil data obat");t=await n.json()}catch(a){alert("Gagal mengambil data obat: "+a.message),t=[]}document.getElementById("app").innerHTML=`\n    <div class="dashboard-container">\n      ${(0,e.Z3)("Manajemen Obat")}\n      <main class="dashboard-main">\n        <header class="profile-header">\n          <button class="back-btn" id="backDashboard">←</button>\n          <h2>Daftar Obat</h2>\n        </header>\n        <section class="profile-section">\n          <button class="save-btn" id="btnTambahObat">\n            <i class="fas fa-plus-circle"></i> Tambah Obat\n          </button>\n          <ul id="listObat">\n            ${t.map(((a,t)=>`\n              <li class="obat-item" data-id="${t}">\n                <div class="obat-content">\n                  <div class="obat-info" style="cursor:pointer;">\n                    <strong>${a.nama||"-"}</strong>\n                    <small>${a.dosis||"-"} – ${a.waktu||"-"}</small>\n                    ${a.catatan?`<small style="display:block; margin-top:4px; font-style:italic;">${a.catatan}</small>`:""}\n                  </div>\n                  <div class="obat-actions">\n                    <button class="edit-btn" data-edit="${t}" title="Edit">\n                      <i class="fas fa-pen"></i>\n                    </button>\n                    <button class="delete-btn" data-delete="${t}" title="Hapus">\n                      <i class="fas fa-trash"></i>\n                    </button>\n                  </div>\n                </div>\n              </li>\n            `)).join("")}\n          </ul>\n        </section>\n      </main>\n    </div>\n  `,document.getElementById("btnTambahObat").addEventListener("click",(()=>s())),document.querySelectorAll(".obat-info").forEach(((a,n)=>{a.addEventListener("click",(a=>{a.stopPropagation(),o(t[n])}))})),document.querySelectorAll(".edit-btn").forEach((a=>{a.addEventListener("click",(n=>{n.stopPropagation();const e=a.dataset.edit;s(t[e],e)}))})),document.querySelectorAll(".delete-btn").forEach((a=>{a.addEventListener("click",(n=>{n.stopPropagation();const e=a.dataset.delete;if(confirm(`Apakah Anda yakin ingin menghapus obat "${t[e].nama}"?`)){const a=[...t];a.splice(e,1),localStorage.setItem("daftarObat",JSON.stringify(a)),i()}}))})),(0,e.GO)(),(0,e.An)("backDashboard")}function s(a=null,t=null){document.getElementById("app").innerHTML=`\n    <div class="dashboard-container">\n      ${(0,e.Z3)("Manajemen Obat")}\n      <main class="dashboard-main">\n        <header class="profile-header">\n          <button class="back-btn" id="backObat">←</button>\n          <h2>${null!==t?"Edit":"Tambah"} Obat</h2>\n        </header>\n        <section class="profile-section">\n          <label>Nama Obat</label>\n          <input type="text" id="namaInput" value="${a?.nama||""}" placeholder="Contoh: Metformin 500 mg">\n          \n          <label>Dosis</label>\n          <input type="text" id="dosisInput" value="${a?.dosis||""}" placeholder="Contoh: 2 butir">\n          \n          <label>Waktu Konsumsi</label>\n          <input type="text" id="waktuInput" value="${a?.waktu||""}" placeholder="Contoh: pagi dan malam">\n          \n          <label>Catatan (Opsional)</label>\n          <input type="text" id="catatanInput" value="${a?.catatan||""}" placeholder="Contoh: minum setelah makan">\n          \n          <button class="save-btn" id="simpanObat">\n            <i class="fas fa-save"></i> Simpan Obat\n          </button>\n        </section>\n      </main>\n    </div>\n  `,document.getElementById("backObat").addEventListener("click",i),document.getElementById("simpanObat").addEventListener("click",(async()=>{const a=document.getElementById("namaInput").value.trim(),t=document.getElementById("dosisInput").value.trim(),n=document.getElementById("waktuInput").value.trim(),e=document.getElementById("catatanInput").value.trim();if(!a||!t||!n)return void alert("Harap lengkapi Nama Obat, Dosis, dan Waktu Konsumsi!");const s={nama:a,dosis:t,waktu:n,catatan:e};try{if(!(await fetch("https://apidiaw-production.up.railway.app/obat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Gagal menambah obat");alert("Obat berhasil ditambahkan!"),i()}catch(a){alert("Gagal menambah obat: "+a.message)}})),(0,e.GO)()}function o(a){document.getElementById("app").innerHTML=`\n    <div class="dashboard-container">\n      ${(0,e.Z3)("Manajemen Obat")}\n      <main class="dashboard-main">\n        <header class="profile-header">\n          <button class="back-btn" id="backObat">←</button>\n          <h2>Detail Obat</h2>\n        </header>\n        <section class="profile-section">\n          <div style="margin-bottom: var(--spacing-xl);">\n            <h3 style="color: var(--primary-color); margin-bottom: var(--spacing-lg);">${a.nama}</h3>\n            \n            <div style="margin-bottom: var(--spacing-lg);">\n              <strong style="display: block; margin-bottom: var(--spacing-xs);">Dosis:</strong>\n              <span>${a.dosis}</span>\n            </div>\n            \n            <div style="margin-bottom: var(--spacing-lg);">\n              <strong style="display: block; margin-bottom: var(--spacing-xs);">Waktu Konsumsi:</strong>\n              <span>${a.waktu}</span>\n            </div>\n            \n            <div style="margin-bottom: var(--spacing-lg);">\n              <strong style="display: block; margin-bottom: var(--spacing-xs);">Catatan:</strong>\n              <span>${a.catatan||"Tidak ada catatan"}</span>\n            </div>\n          </div>\n          \n          <button class="save-btn" id="backToList">\n            <i class="fas fa-arrow-left"></i> Kembali ke Daftar\n          </button>\n        </section>\n      </main>\n    </div>\n  `,document.getElementById("backObat").addEventListener("click",i),document.getElementById("backToList").addEventListener("click",i),(0,e.GO)()}}}]);